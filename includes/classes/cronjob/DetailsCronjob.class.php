<?php

/*
 * ╔══╗╔══╗╔╗──╔╗╔═══╗╔══╗╔╗─╔╗╔╗╔╗──╔╗╔══╗╔══╗╔══╗
 * ║╔═╝║╔╗║║║──║║║╔═╗║║╔╗║║╚═╝║║║║║─╔╝║╚═╗║║╔═╝╚═╗║
 * ║║──║║║║║╚╗╔╝║║╚═╝║║╚╝║║╔╗─║║╚╝║─╚╗║╔═╝║║╚═╗──║║
 * ║║──║║║║║╔╗╔╗║║╔══╝║╔╗║║║╚╗║╚═╗║──║║╚═╗║║╔╗║──║║
 * ║╚═╗║╚╝║║║╚╝║║║║───║║║║║║─║║─╔╝║──║║╔═╝║║╚╝║──║║
 * ╚══╝╚══╝╚╝──╚╝╚╝───╚╝╚╝╚╝─╚╝─╚═╝──╚╝╚══╝╚══╝──╚╝
 *
 * @author Tsvira Yaroslav <https://github.com/Yaro2709>
 * @info ***
 * @link https://github.com/Yaro2709/New-Star
 * @Basis 2Moons: XG-Project v2.8.0
 * @Basis New-Star: 2Moons v1.8.0
 */

use Florian\NewStar\classes\Database;
use Florian\NewStar\classes\Universe;

require_once 'includes/classes/cronjob/CronjobTask.interface.php';

class DetailsCronjob implements CronjobTask
{
	function run()
	{
        global $reslist;
        
        $input      = $reslist['details'];
        $rand_keys  = array_rand($input, 4);
        $list       = ''.$input[$rand_keys[0]].','.$input[$rand_keys[1]].','.$input[$rand_keys[2]].','.$input[$rand_keys[3]].'';
        $sql	    = "UPDATE %%CONFIG%% SET details_cron = :details WHERE uni = :uniId;";

		Database::get()->update($sql, array(
			':details'	=> $list,
			':uniId'	=> Universe::current(),
		));
	}
}
